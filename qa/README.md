# Flexatorium Testing

This directory contains end-to-end testing for the project.

# Setup and Run

Use the requirements.txt file in this directory to build a virtual environment. 

Recommended: Name the virtual environment qa_env to differentiate from the application's virtual environment.

qa_env is blocked in gitignore to facilitate this.

Tests can be run by executing the pytest command in the project root directory. 

## Command Line Options

Command line options (defined in conftest.py) can be used to specify a url against the tests will be run

The command line option "baseurl" sets the URL to test against. 

If you have published the application and want to test it live, specify the url of the deployment here
    `$pytest --baseurl=example.com`

If this option is not set, it will default to "http://127.0.0.1:5000/" , flask's default local publishing URL.
This is usually the right URL for testing locally.

## Markers
Pytest markers (defined in pytest.ini) are used to categorize tests by feature and by test depth.

Use these markers to select a suite of tests to run.

`$pytest -m "signup"`

"and/or/not" may be used to create more specific groupings of tests

`$pytest -m "login and smoke"`

## Reports

HTML reports can be generated by passing a path and filename to the html option:
`--html=reports/pytest_report.html`
Generate reports in the reports directory to keep them out of github.

Reports may be generated in a single file like so: 
`--self-contained-html`

Running a test with both of these options:
`pytest -m "download" --host=localhost --html=reports/pytest_report.html --self-contained-html`

